<!doctype html>
<html lang="it">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>DailyAI — Notizie da Hacker News</title>
  <style>
    body { font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; margin: 40px auto; max-width: 920px; line-height: 1.5; color: #111; }
    h1 { font-size: 2rem; margin: 0 0 6px; }
    p.sub { color: #555; margin: 0 0 24px; }
    article { display: grid; grid-template-columns: 180px 1fr; gap: 16px; padding: 18px 0; border-bottom: 1px solid #eee; }
    img.thumb { width: 180px; height: 110px; object-fit: cover; border-radius: 8px; background: #f6f6f6; }
    .meta { font-size: .9rem; color: #777; margin-top: 6px; }
    a.title { color: #111; text-decoration: none; }
    a.title:hover { text-decoration: underline; }
    footer { margin: 36px 0; font-size: .9rem; color: #888; text-align: center; }
  </style>
</head>
<body>
  <h1>DailyAI</h1>
  <p class="sub">Ultime notizie su AI da Hacker News. Aggiornamento automatico ogni giorno.</p>

  <div id="feed">Caricamento…</div>

  <footer>Fonte RSS Hacker News • open source su GitHub Pages</footer>

  <script>
    function esc(s){return (s||"").replace(/[&<>"']/g,m=>({"&":"&amp;","<":"&lt;",">":"&gt;","\"":"&quot;","'":"&#39;"}[m]))}
    function proxy(u){
      if(!u) return "https://via.placeholder.com/180x110?text=AI";
      // proxy per evitare blocchi di immagini
      return "https://images.weserv.nl/?url=" + encodeURIComponent(u) + "&w=360&h=220&fit=cover";
    }
    async function load(){
      const r = await fetch("./public/data.json?_=" + Date.now());
      const data = await r.json();
      const items = data.items || [];
      const el = document.getElementById("feed");
      if(!items.length){ el.textContent = "Nessuna notizia al momento."; return; }
      el.innerHTML = items.map(it => `
        <article>
          <img class="thumb" referrerpolicy="no-referrer" src="${proxy(it.image)}" alt="">
          <div>
            <h2 style="margin:0 0 6px"><a class="title" href="${it.url}" target="_blank" rel="noopener">${esc(it.title)}</a></h2>
            <p style="margin:0 0 8px">${esc(it.summary||"")}</p>
            <div class="meta">${new Date(it.date).toLocaleString("it-IT")}</div>
          </div>
        </article>
      `).join("");
    }
    load();
  </script>
</body>
</html>
